jQuery(document).ready(function(){jQuery(function(t){function o(t){for(var o=t+"=",e=document.cookie.split(";"),a=0;a<e.length;a++){for(var s=e[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(o))return s.substring(o.length,s.length)}return""}function e(t){var t=o(t);return""!=t?!0:!1}function a(){if(null!=global.cookie_names)for(var o=0;o<global.cookie_names.length;o++)c(global.cookie_names[o]);if(null==global.current_user_id)var a="guest";else var a=global.current_user_id;if("guest"==a){var l,r=0,i="",n="",p="",u="",g="",h="",b="",m=0,f="",r=0;l=document.cookie.split(/; */);var k="ps_product_"+a+"-";t.each(l,function(){var o=this.split("=");if(-1!=o[0].indexOf(k)){i=o[0];var l=t.cookie(i);l=l.split(","),n=l[0],u=l[1],f=l[2],sku=l[3],h=l[4],b=l[5],m=l[6],item_guid=l[7],product_type=l[8],p=""==m||null==m||"undefined"==typeof m?"":global.wc_currency+m,""==b&&(b=global.plugin_url+"/assets/images/placeholder.png"),0==t("#ced_ps_product-"+f).length&&e(i)&&(r++,productHtml='<div class="ced_ps_product_info" id="ced_ps_product-'+f+'" title="'+u+'">',productHtml+='<a href="javascript:void(0);" class="ced_ps_item_remove"><img src="'+global.crossImageUrl+'"></a>',productHtml+='<a href="'+item_guid+'" class="ced_ps_item_img"><img src="'+b+'" class="attachment-shop_catalog size-shop_catalog wp-post-image ced_ps_product_image" width="55" height="55"></a>',productHtml+='<a href="'+item_guid+'"><span class="ced_ps_item_title">'+u+"</span></a>",productHtml+='<span class="ced_ps_item_price">'+p+"</span>","variable"==product_type?productHtml+='<a class="button product_type_variable add_to_cart_button ced_ps_atc_btn" data-product_sku="'+g+'" data-product_id="'+f+'" data-quantity="1" href="'+n+'" rel="nofollow" style="background-color: '+global.shortlist_addtocart_background_color+" !important; color: "+global.shortlist_addtocart_font_color+' !important">'+h+"</a>":productHtml+='<a class="button product_type_simple add_to_cart_button ajax_add_to_cart ced_ps_atc_btn" id="ced_ps_addtocart_button" data-product_sku="'+g+'" data-product_id="'+f+'" data-quantity="1" href="'+n+'" rel="nofollow" style="background-color: '+global.shortlist_addtocart_background_color+" !important; color: "+global.shortlist_addtocart_font_color+' !important">'+h+"</a>",productHtml+="</div>",t("."+global.shortlist_section_position+"-shortlist-section").prepend(productHtml),t("#ced_ps_shortlisted_qty").html(r),_(f),t("#ced_ps_remove_all").show(),t(".ced_ps_empty_section_text").hide())}else{var c=s(f,a);0==c&&t(".ced_ps_empty_section_text").show()}})}else t.ajax({url:global.ajaxurl,type:"post",data:{action:"get_shortlisted_products",user_id:a,security_check:global.ced_ps_nonce},success:function(s){if("no shortlisted products"==s)t(".ced_ps_empty_section_text").show();else try{discount_arr=JSON.parse(global.discount_arr);var l=0,c=JSON.parse(s),i="";for(o in c){l++;var n=c[o].id,p=c[o],u="",g=0;if(u=""==p.image?global.plugin_url+"/assets/images/placeholder.png":p.image,i='<div class="ced_ps_product_info" id="ced_ps_product-'+n+'" title="'+p.title+'">',i+='<a href="javascript:void(0);" class="ced_ps_item_remove"><img src="'+global.crossImageUrl+'"></a>',i+='<a href="'+p.guid+'" class="ced_ps_item_img"><img src="'+u+'" class="attachment-shop_catalog size-shop_catalog wp-post-image ced_ps_product_image" width="55" height="55"></a>',i+='<a href="'+p.guid+'"><span class="ced_ps_item_title">'+p.title+"</span></a>",""!=discount_arr||null!=discount_arr)for(d in discount_arr)discount_arr[d].id==n&&""!=value1&&("rate"==global.discount_type?(price=p.price-value1*p.price/100,price=global.wc_currency+price,g=1):(price=p.price-value1,price=global.wc_currency+price,g=1));if(0==g&&""!=p.price?(price=global.wc_currency+p.price,i+='<span class="ced_ps_item_price">'+price+"</span>"):i+=""!=p.price?'<span class="ced_ps_item_price"><strike>'+global.wc_currency+p.price+"</strike>   "+price+"</span>":'<span class="ced_ps_item_price">  </span>',i+="variable"==p.type?'<a class="button product_type_variable add_to_cart_button ced_ps_atc_btn" data-product_sku="'+p.sku+'" data-product_id="'+n+'" data-quantity="1" href="'+p.atc_url+'" rel="nofollow" style="background-color: '+global.shortlist_addtocart_background_color+" !important; color: "+global.shortlist_addtocart_font_color+' !important">'+p.atc_text+"</a>":'<a class="button product_type_simple add_to_cart_button ajax_add_to_cart ced_ps_atc_btn" id="ced_ps_addtocart_button" data-product_sku="'+p.sku+'" data-product_id="'+n+'" data-quantity="1" href="'+p.atc_url+'" rel="nofollow" style="background-color: '+global.shortlist_addtocart_background_color+" !important; color: "+global.shortlist_addtocart_font_color+' !important">'+p.atc_text+"</a>",i+="</div>",t("."+global.shortlist_section_position+"-shortlist-section").prepend(i),t("#ced_ps_shortlisted_qty").html(r),_(n),t("#ced_ps_remove_all").show(),t(".ced_ps_empty_section_text").hide(),!e("ps_product_"+a+"-"+n)){var h=new Date,b=[p.atc_url,p.title,n,p.sku,p.atc_text,p.image,price,p.guid,p.type];h.setTime(h.getTime()+24*global.cookie_exp_time*60*60*1e3);var m="expires="+h.toUTCString();document.cookie="ps_product_"+a+"-"+n+"="+b+"; "+[m+"; path="+global.base_path].join()}}0==l?t(".ced_ps_empty_section_text").show():t("#ced_ps_shortlisted_qty").html(l)}catch(f){}}})}function s(o,a){cookies=document.cookie.split(/; */);var s="ps_product_"+a,l=0,c="";return t.each(cookies,function(){var o=this.split("=");-1!=o[0].indexOf(s)&&(cookie_name=o[0],c=t.cookie(cookie_name).split(","),e(cookie_name)&&l++)}),l}function l(t,o){document.cookie="ps_product_"+o+"-"+t+"=; "+["Thu, 18 Dec 2013 12:00:00 UTC; path="+global.base_path].join(""),i(t)}function c(t){document.cookie=t+"=; "+["Thu, 18 Dec 2013 12:00:00 UTC; path="+global.base_path].join("");var o=t.substring(t.indexOf("-")+1,t.length);i(o)}function r(){if(null==global.current_user_id)var o="guest";else var o=global.current_user_id;cookies=document.cookie.split(/; */);var a="ps_product_"+o,s="";t.each(cookies,function(){var c=this.split("=");-1!=c[0].indexOf(a)&&(cookie_name=c[0],s=t.cookie(cookie_name).split(","),e(cookie_name)&&(product_id=s[2],l(product_id,o),t("#ced_ps_shortlisted_qty").html(0)))})}function _(o){t("#ps_product-"+o).find("polygon").attr("stroke","#0BB1AF"),t("#ps_product-"+o).find("polygon").attr("fill","#0BB1AF")}function i(o){t("#ps_product-"+o).find("polygon").attr("stroke","#555555"),t("#ps_product-"+o).find("polygon").attr("fill","#ffffff")}function n(){t("#ced_ps_remove_all").hide(),t(".ced_ps_empty_section_text").show("slow")}function p(o){t.post(global.ajaxurl,{action:"update_shortlisted_records",security_check:global.ced_ps_nonce,product_id:o},function(t){})}global.shortlist_section_position||(global.shortlist_section_position="left"),global.shortlist_background_color||(global.shortlist_background_color="red"),global.shortlist_font_color||(global.shortlist_font_color="white"),global.shortlist_addtocart_font_color||(global.shortlist_addtocart_font_color="white"),global.shortlist_addtocart_background_color||(global.shortlist_addtocart_background_color="red"),global.shortlist_removeall_background_color||(global.shortlist_removeall_background_color="red"),global.removeall_text||(global.removeall_text="Remove All"),global.removeall_font_color||(global.removeall_font_color="white"),t(".ced_ps_"+global.shortlist_section_position+"_shortlist_span").css("background",global.shortlist_background_color),t("span.ced_ps_shortlist_btn").css("color",global.shortlist_font_color),a(),(global.user_logged_in||""!=global.user_logged_in)&&t("#ced_ps_shortlist_text").addClass("ced_ps_user_logged-in"),t(document).on("click","#ced_ps_shortlist_text",function(){u(t(this),global.shortlist_section_position)});var u=function(o,e){var a=t(document).find(".ced_ps-shortlist-section").css("max-width"),s="",l="+",c=o.siblings(".ced_ps-shortlist-section").data("expanded"),r="yes";"yes"==c&&(l="-",r="no"),"top"==e||"bottom"==e?o.siblings("."+global.shortlist_section_position+"-shortlist-section").slideToggle("slow"):("left"==e||"right"==e)&&(s=a?a:"150px",o.siblings("."+global.shortlist_section_position+"-shortlist-section").toggle("slide","right","slow"),"left"==e?o.animate({left:l+"="+s},"slow"):o.animate({right:l+"="+s},"slow"),o.siblings(".ced_ps-shortlist-section").data("expanded",r))};t(document).on("click",".ced_ps_add_to_shortlist",function(){var o=t(this).data("atc_url"),a=t(this).data("title"),s=t(this).data("id"),c=t(this).data("sku"),r=t(this).data("atc_text"),i=t(this).data("price"),d=t(this).data("guid"),u=t(this).data("image"),g=t(this).data("user_id"),h=t(this).data("type"),b=t("#ced_ps_shortlisted_qty").html(),m="",f=new Date,k="";if(""==g&&(g="guest"),u&&"undefined"!=typeof u&&""!=u&&null!=u||(u=global.plugin_url+"assets/images/placeholder.png"),k=""==i||null==i||"undefined"==typeof i?"":global.wc_currency+i,0!=t("#ced_ps_product-"+s).length||e("ps_product_"+g+"-"+s))0!=t("#ced_ps_product-"+s).length&&t.cookie("ps_product_"+g+"-"+s)&&(t("#ced_ps_product-"+s).remove(),b=parseInt(b)-1,l(s,g),t("#ced_ps_shortlisted_qty").html(b),t(this).find("polygon").attr("stroke","#555555"),t(this).find("polygon").attr("fill","#ffffff"),0==b&&n(),null!=global.current_user_id&&t.ajax({url:global.ajaxurl,type:"post",data:{action:"delete_shortlisted_product",product_id:s,user_id:global.current_user_id,security_check:global.ced_ps_nonce},success:function(t){}}));else{var v=[o,a,s,c,r,u,i,d,h];f.setTime(f.getTime()+24*global.cookie_exp_time*60*60*1e3);var y="expires="+f.toUTCString();document.cookie="ps_product_"+g+"-"+s+"="+v+"; "+[y+"; path="+global.base_path].join(),b=parseInt(b)+1,p(s),m='<div class="ced_ps_product_info" id="ced_ps_product-'+s+'" title="'+a+'">',m+='<a href="javascript:void(0);" class="ced_ps_item_remove"><img src="'+global.crossImageUrl+'"></a>',m+='<a href="'+d+'" class="ced_ps_item_img"><img src="'+u+'" class="attachment-shop_catalog size-shop_catalog wp-post-image ced_ps_product_image" width="55" height="55"></a>',m+='<a href="'+d+'"><span class="ced_ps_item_title">'+a+"</span></a>",m+='<span class="ced_ps_item_price">'+k+"</span>",m+="variable"==h?'<a class="button product_type_variable add_to_cart_button ced_ps_atc_btn" data-product_sku="'+c+'" data-product_id="'+s+'" data-quantity="1" href="'+o+'" rel="nofollow" style="background-color: '+global.shortlist_addtocart_background_color+" !important; color: "+global.shortlist_addtocart_font_color+' !important">'+r+"</a>":'<a class="button product_type_simple add_to_cart_button ajax_add_to_cart ced_ps_atc_btn" id="ced_ps_addtocart_button" data-product_sku="'+c+'" data-product_id="'+s+'" data-quantity="1" href="'+o+'" rel="nofollow" style="background-color: '+global.shortlist_addtocart_background_color+" !important; color: "+global.shortlist_addtocart_font_color+' !important">'+r+"</a>",m+="</div>",t("."+global.shortlist_section_position+"-shortlist-section").prepend(m),t("#ced_ps_shortlisted_qty").html(b),_(s),t("#ced_ps_remove_all").show(),t(".ced_ps_empty_section_text").hide()}}),t(document).on("click",".ced_ps_item_remove",function(){if(null==global.current_user_id)var o="guest";else var o=global.current_user_id;var e=t(this).siblings("a.ced_ps_atc_btn").data("product_id"),a="";a=s(e,o),l(e,o),t(this).parent("div.ced_ps_product_info").remove(),t("#ced_ps_shortlisted_qty").html(a-1),1==a&&n(),null!=global.current_user_id&&t.ajax({url:global.ajaxurl,type:"post",data:{action:"delete_shortlisted_product",product_id:e,user_id:global.current_user_id,security_check:global.ced_ps_nonce},success:function(t){}})}),t(document).on("click","#ced_ps_remove_all",function(){r(),t(".ced_ps_product_info").remove(),n(),null!=global.current_user_id&&t.ajax({url:global.ajaxurl,type:"post",data:{action:"delete_all_shortlisted_products",user_id:global.current_user_id,security_check:global.ced_ps_nonce},success:function(t){}})})})});